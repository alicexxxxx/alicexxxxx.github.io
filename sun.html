<!DOCTYPE html>
<html>

<head>
    <title>我</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css" />
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <script src="./live2d-widget1/autoload.js"></script>
</head>
<style>
    body {
        background: url(img/sun.jpg) no-repeat;
        background-attachment: fixed;
        background-size: cover;
        background-position: center center;

    }

    .warp {
        width: 80%;
        margin: 0 auto;
        color: #9300a6;
        text-shadow: 0 0 5px #fff,
            0 0 10px #fff,
            0 0 3px #fff,
            0 0 3px #a60082,
            0 0 3px #8500a6,
            0 0 3px #9300a6,
            0 0 3px #a60061,
            0 0 3px #a6007d;

    }

    .music {
        display: none;
    }
</style>

<body>
    <iframe allow="autoplay" src="./music/fushen.m4a" class="music"></iframe>
    <div class="warp">

        <h1>十六夜幽幽蝶的快樂真的很簡單</h1>
        <div id="source" style="display:none">
            <span>2019.2.25<br>--</span>
            <section>這一天我來了青島，已經從蒙牛走了半个月的我<br><br><br></section>
            <span>2019.2.27<br>--</span>
            <section>
                去了办公室，见到了同事，也见到了她，想到了她家的狗，哈哈，虽然我知道她在，但是变化好大，毕竟是大姑娘了.<br>
                一想到以后要跟她一起工作，就很开心.<br>
                大概有8年了吧.<br>
                8年前去了石老人，去了崂山，去了五四广场,去了栈桥，也去了她家.<br>
                虽然我也不知道去她家干嘛的，想那么多干嘛呢.<br>
                真的没想到还能再次再滚滚红尘中遇到.<br>
                2个人能在这个世界相遇的几率听说只有0.00000003. <br>
                何况8年之后还能重逢呢，或许这真的就是命运石之门的选择了吧.<br>
                听说前世500次的回眸才能换来今生的插肩而过，那我估计是上辈子看了她万万次.<br>
                这辈子咱真的不想在放弃了.<br>
                偶然想起雪中悍刀行中洪洗象对徐脂虎说过得一句话，我已经喜欢了你800年，所以这世界是没有比我更喜欢你的了.<br>
                或许我真在8年前就喜欢她了，或许更早，上辈子吗?<br>
                人这一生总会遇到几个视之如命的人不是吗?<br><br><br>
            </section>
            <span>2019.2.28-3.7 <br>
                --
            </span>
            <section>
                我坐在她旁边，终于一起工作了.<br>
                偶尔我会看看她.<br>
                真的觉得她是世界上最好看的姑凉了.<br>
                我其实不是太喜欢说话的，尤其是跟女生，几乎不说话.<br>
                哎，但是为什么就那么喜欢跟她说话呢?<br>
                就什么都想给她，想对她好一点.<br>
                可是没想过这样会不会给她带来困扰，真像个大傻子.<br>
                还喜欢东问西问的，调查户口啊!<br>
                调查好了有本事把她身份证抢了，拿去民政局啊!<br>
                我啥时候变得这么直了呀.<br><br><br>
            </section>
            <span>2019.3.9 <br>--</span>
            <section>
                3.9号最难过的一天，天好像塌下来了，她不理我了.<br>
                我不知道怎么办.<br>
                心里好像被插了一把刀子.<br>
                我那里做错了吗，真的不知道.<br>
                中午她去吃饭，我只能跟在后面，过马路想拽她，被她甩开了.<br>
                世界末日不过如此.<br>
                有时候语言是真的苍白.<br><br><br>
            </section>
            <span>2019.3.10 <br>--</span>
            <section>
                她从我身边离开了.<br>
                和别人换了位置.<br>
                我以为我能挽留.<br>
                可是我能说什么呢.<br>
                或许都冷静一下就能和好了吧.<br><br><br>
            </section>
            <span>
                2019.3.13 <br>--
            </span>
            <section>
                昨天她加班到了半夜1点多，可是我不在. <br>
                我感冒了，估计是伤心降低了免疫力吧，自嘲. <br>
                好想陪她加班，可是现在的我好像没有陪她加班的身份 .<br><br><br>
            </section>
            <span>
                2019.3.14 <br>--
            </span>
            <section>
                她没理我，我也不想说话，难受.<br><br>
            </section>
            <span>2019.3.15 <br>--</span>
            <section>
                她已经一个星期没理我，我也不想说话，难受.br><br>
            </section>
            <span>2019.3.16 <br>--</span>
            <section>
                她在qq上回我消息了.<br>
                可是确说不喜欢我.<br>
                我的小世界，呵.<br>
                但是我真是挺喜欢她啊 .<br>
                喜欢就是喜欢，我也没什么好藏得.<br>
                干脆就对她说了吧.<br>
                她没回消息.<br>
                我也不知道说什么.<br>
                无言.<br><br><br>
            </section>
            <span>2019.4.5 <br>--</span>
            <section>
                她不理我的一个月.<br>
                我本来以为我放下了.<br>
                看来还是不行.<br>
                我想跟她和好.<br>
                我给她发消息.<br>
                她还是不理我.<br><br><br>
            </section>
            <span>2019.4.6-4.8 <br>--</span>
            <section>
                加班.<br>
                项目要上线.<br>
                加班测试.<br><br><br>
            </section>
            <span>2019.4.13-4.14 <br>--</span>
            <section>
                加班.<br>
                搬办公室.<br>
                加班.<br>
                装桌子.<br>
                打扫卫生.<br>
                我想让她坐好一点的凳子，给她发了消息.<br>
                她理我了，简单的谢谢.<br>
                不过我也挺开心的，至少有能和好的可能了.<br><br><br>
            </section>
            <span>2019.4.15 <br>--</span>
            <section>
                下午，我婶婶过来了，带了小孩，然后让我跟她一块带孩子去玩.<br>
                我本来以为她不会跟我说话.<br>
                没想到她跟我说话了，我真的开心坏了!!!<br>
                可是又不能表现出来.<br>
                反正是真的超开心！超开心！超开心！<br>
                她抱着小孩，然后给我抱的时候，嘿嘿嘿，开心到爆炸!!!!!<br><br><br>
            </section>
            <span>2019.4.16</span>
            <section>
                我真的很喜欢她，真的很喜欢..<br>
                我希望我们的故事永远不会完结...........<br><br><br>
            </section>
            <span>----未完待续</span>
        </div>
        <div id="output">

        </div>
    </div>

    <script type="text/javascript">
        class Typing {
            constructor(opts) {
                this.opts = opts || {};
                this.source = opts.source;
                this.output = opts.output;
                this.delay = opts.delay || 120;
                this.chain = {
                    parent: null,
                    dom: this.output,
                    val: []
                };
                if (!(typeof this.opts.done === 'function')) this.opts.done = function () {};
            }

            init() {
                //初始化函数
                this.chain.val = this.convert(this.source, this.chain.val);
            }

            convert(dom, arr) {
                //将dom节点的子节点转换成数组，
                let children = Array.from(dom.childNodes)
                for (let i = 0; i < children.length; i++) {
                    let node = children[i]
                    if (node.nodeType === 3) {
                        arr = arr.concat(node.nodeValue.split('')) //将字符串转换成字符串数组，后面打印时才会一个一个的打印
                    } else if (node.nodeType === 1) {
                        let val = []
                        val = this.convert(node, val)
                        arr.push({
                            'dom': node,
                            'val': val
                        })
                    }
                }
                return arr
            }

            print(dom, val, callback) {
                setTimeout(function () {
                    dom.appendChild(document.createTextNode(val));
                    callback();
                }, this.delay);
            }

            play(ele) {
                //当打印最后一个字符时，动画完毕，执行done
                if (!ele.val.length) {
                    if (ele.parent) this.play(ele.parent);
                    else this.opts.done();
                    return;
                }
                let current = ele.val.shift() //获取第一个元素，同时删除数组中的第一个元素
                if (typeof current === 'string') {
                    this.print(ele.dom, current, () => {
                        this.play(ele); //继续打印下一个字符
                    })
                } else {
                    let dom = current.dom.cloneNode() //克隆节点，不克隆节点的子节点，所以不用加参数true
                    ele.dom.appendChild(dom)
                    this.play({
                        parent: ele,
                        dom,
                        val: current.val
                    })
                }
            }

            start() {
                this.init();
                this.play(this.chain);
            }
        }
    </script>
    <script type="text/javascript">
        let source = document.getElementById('source')
        let output = document.getElementById('output')
        let typing = new Typing({
            source,
            output
        })
        typing.start()
    </script>
</body>

</html>